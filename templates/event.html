<!DOCTYPE html>
<html>
  <head>
    {% include 'head.html' %}
  </head>
  <body>
    {% include 'nav.html' %}
    <div class="container" id="container">
        <img class="img-fluid" id="banner" src="/static/IMG_3354.JPG" >

        <h4 style='text-align:center' class="mb-2">
            <span style='color:#000099'>{{event['long_desc']}}</span>  
            <!--{{event['long_desc']}}    -->
        </h4>

        <p>{{event['class']}}</p>

        <div class="table-responsive">
          <table class="table table-hover table-striped table-sm">
            <thead>
              <tr>
                <th>Place</th>
                <th>Name</th>
                <th>Club</th>
                <th class="text-end">Time</th>
                <th class="text-end">Ranking Points</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody>
              {% for result in results %}
              <tr>
                <td>{% if result['race_time'] | is_valid_time_format %}{{ result['place'] }}{% endif %}</td>
                <td>{{ result['full_name'] }}</td>
                <td>{{ result['short_name'] }}</td>
                <td class="text-end">{{ result['race_time'] }}</td>
                <td class="text-end">{{ result['race_points'] | int }}</td>
                <td>
                  {% if result['eligible'] == 'N' %}
                      *
                  {% elif result['athlete_id'] %} 
                      <a href="/athlete/{{result['athlete_id']}}" type="button" class="btn btn-outline-primary">Details</a>
                  {% else %}
                      <a href="/athlete/add?full_name={{result['full_name']}}" type="button" class="btn btn-outline-warning">Add</a>
                      <a href="/athlete/ineligible?full_name={{ result['full_name'] | urlencode }}&list={{ event['list'] | urlencode }}" type="button" class="btn btn-outline-warning">*</a>
                  {% endif %} 
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div>
            <p>Event date: {{ event['date'] | _jinja2_filter_datetime }}</p>
            <p>Race importance factor, IP: {{ event['ip'] | float }}</p>
            <a href="https://eventor.orienteering.asn.au/Events/ResultList?eventId={{ event['eventor_id'] }}" target="_blank">Eventor</a>
            {% if results | selectattr('eligible', 'equalto', 'N') | list %} 
              <p class="mt-3 fs-6">* ineligible</p> 
            {% endif %}        
        </div>
    </div>
    {% include "footer.html" %}
  </body>
</html>
